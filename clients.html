<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>友喬環境監測系統 - 客戶管理</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
    <div class="container">
        <div class="page">
            <div class="toolbar">
                <h2>客戶管理</h2>
                <div class="search-bar">
                    <input type="text" id="clientSearch" placeholder="搜尋客戶名稱或統編" onkeyup="Clients.searchClients()">
                    <button class="btn" onclick="Clients.searchClients()">搜尋</button>
                    <button class="btn btn-primary" onclick="Common.showModal('newClient')">新增客戶</button>
                </div>
            </div>
            
            <table class="table" id="clientsTable">
                <thead>
                    <tr>
                        <th>客戶編號</th>
                        <th>公司名稱</th>
                        <th>統一編號</th>
                        <th>聯絡人</th>
                        <th>電話</th>
                        <th>專案數</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 動態載入客戶資料 -->
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- 新增客戶模態框 -->
    <div id="newClientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>新增客戶</h2>
            </div>
            
            <form id="clientForm">
                <div class="form-group">
                    <label>公司名稱</label>
                    <input type="text" name="companyName" placeholder="輸入公司全名" required>
                </div>
                
                <div class="form-group">
                    <label>統一編號</label>
                    <input type="text" name="taxId" placeholder="8位數統編" pattern="[0-9]{8}" required>
                </div>
                
                <div class="grid-2col">
                    <div class="form-group">
                        <label>聯絡人</label>
                        <input type="text" name="contactName" required>
                    </div>
                    <div class="form-group">
                        <label>職稱</label>
                        <input type="text" name="contactTitle">
                    </div>
                </div>
                
                <div class="grid-2col">
                    <div class="form-group">
                        <label>電話</label>
                        <input type="tel" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>公司地址</label>
                    <input type="text" name="address" required>
                </div>
            </form>
            
            <div class="modal-footer">
                <button class="btn" onclick="Common.closeModal()">取消</button>
                <button class="btn btn-primary" onclick="Clients.saveClient()">儲存</button>
            </div>
        </div>
    </div>

    <!-- 客戶詳細資訊模態框 -->
    <div id="clientDetailModal" class="modal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h2 id="clientDetailTitle">客戶詳細資訊</h2>
            </div>
            
            <div class="tabs">
                <div class="tab active" onclick="Common.switchTab(event, 'clientInfo', '#clientDetailModal')">基本資料</div>
                <div class="tab" onclick="Common.switchTab(event, 'clientProjects', '#clientDetailModal')">專案記錄</div>
                <div class="tab" onclick="Common.switchTab(event, 'clientHistory', '#clientDetailModal')">歷史紀錄</div>
            </div>
            
            <div id="clientInfo" class="tab-content active">
                <div class="grid-2col">
                    <div>
                        <p><strong>客戶編號：</strong><span id="detailClientId"></span></p>
                        <p><strong>公司名稱：</strong><span id="detailCompanyName"></span></p>
                        <p><strong>統一編號：</strong><span id="detailTaxId"></span></p>
                        <p><strong>聯絡人：</strong><span id="detailContactName"></span></p>
                    </div>
                    <div>
                        <p><strong>職稱：</strong><span id="detailContactTitle"></span></p>
                        <p><strong>電話：</strong><span id="detailPhone"></span></p>
                        <p><strong>Email：</strong><span id="detailEmail"></span></p>
                        <p><strong>地址：</strong><span id="detailAddress"></span></p>
                    </div>
                </div>
            </div>
            
            <div id="clientProjects" class="tab-content">
                <h3>專案記錄</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>專案編號</th>
                            <th>專案名稱</th>
                            <th>監測日期</th>
                            <th>狀態</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="clientProjectsTable">
                        <!-- 動態載入專案資料 -->
                    </tbody>
                </table>
            </div>
            
            <div id="clientHistory" class="tab-content">
                <h3>歷史紀錄</h3>
                <ul id="clientHistoryList">
                    <!-- 動態載入歷史紀錄 -->
                </ul>
            </div>
            
            <div class="modal-footer">
                <button class="btn" onclick="Common.closeModal()">關閉</button>
                <button class="btn btn-primary" onclick="Clients.editCurrentClient()">編輯客戶</button>
            </div>
        </div>
    </div>
    
    <!-- 載入順序很重要 -->
    <script src="navigation.js"></script>
    <script src="common.js"></script>
    <script src="data-init.js"></script>
    <script src="clients.js"></script>
</body>
</html>